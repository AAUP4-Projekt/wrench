fn bool filter_even_id(row(string name, int id, bool in_stock) r){
    return r.id % 2 == 0;
};

fn row(int new_id) double_id(row(string name, int id, bool in_stock) t){
    return row(int new_id = t.id * 2);
};

fn row(int sum) sum(row(int new_id) t){
    return row(int sum = 4);
};

async_import("programs/data/stock.csv", table(string name, int id, bool in_stock))
    pipe filter_even_id()
    pipe double_id()
    pipe sum()
    pipe print();